<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº²å­ä»»åŠ¡ - èŒèŠ½AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .task-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.1);
            overflow: hidden;
            margin: 16px;
        }
        .task-header {
            background: linear-gradient(135deg, #EC4899 0%, #8B5CF6 100%);
            color: white;
            padding: 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .task-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: familyGlow 4s ease-in-out infinite;
        }
        @keyframes familyGlow {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }
        .family-icon {
            font-size: 48px;
            margin-bottom: 12px;
            animation: familyFloat 3s ease-in-out infinite;
        }
        @keyframes familyFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
        .participants-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            padding: 20px;
            background: #f8fafc;
        }
        .participant-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        .participant-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .participant-card.child {
            border: 2px solid #8B5CF6;
        }
        .participant-card.parent {
            border: 2px solid #EC4899;
        }
        .participant-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            color: white;
        }
        .participant-card.child .participant-avatar {
            background: linear-gradient(135deg, #8B5CF6, #3B82F6);
        }
        .participant-card.parent .participant-avatar {
            background: linear-gradient(135deg, #EC4899, #F97316);
        }
        .participant-name {
            font-size: 16px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 4px;
        }
        .participant-role {
            font-size: 12px;
            color: #6b7280;
        }
        .task-content {
            padding: 24px;
        }
        .section-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 16px;
        }
        .section-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #EC4899, #8B5CF6);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        .task-description {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
        }
        .task-description::before {
            content: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦';
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 24px;
        }
        .role-section {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            transition: all 0.3s ease;
        }
        .role-section.child-role {
            border-color: #8B5CF6;
            background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
        }
        .role-section.parent-role {
            border-color: #EC4899;
            background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);
        }
        .role-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        .role-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
        }
        .role-section.child-role .role-avatar {
            background: linear-gradient(135deg, #8B5CF6, #3B82F6);
        }
        .role-section.parent-role .role-avatar {
            background: linear-gradient(135deg, #EC4899, #F97316);
        }
        .role-title {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
        }
        .task-steps {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .task-steps li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
        }
        .step-number {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            flex-shrink: 0;
        }
        .collaboration-zone {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }
        .collaboration-zone::before {
            content: 'ğŸ¤';
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 24px;
        }
        .timer-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 16px;
            padding: 16px;
            margin: 16px 0;
            text-align: center;
        }
        .timer-display {
            font-size: 32px;
            font-weight: bold;
            color: #92400e;
            margin-bottom: 8px;
        }
        .timer-label {
            font-size: 12px;
            color: #92400e;
        }
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 24px 0;
        }
        .action-btn {
            padding: 16px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }
        .primary-btn {
            background: linear-gradient(45deg, #EC4899, #8B5CF6);
            color: white;
        }
        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.3);
        }
        .secondary-btn {
            background: white;
            border: 2px solid #e5e7eb;
            color: #374151;
        }
        .secondary-btn:hover {
            background: #f9fafb;
            border-color: #EC4899;
            transform: translateY(-1px);
        }
        .progress-indicator {
            background: #f3f4f6;
            border-radius: 10px;
            height: 8px;
            margin: 16px 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #EC4899, #8B5CF6);
            border-radius: 10px;
            transition: width 1s ease;
        }
        .tips-card {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 2px solid #22c55e;
            border-radius: 16px;
            padding: 16px;
            margin: 16px 0;
            position: relative;
        }
        .tips-card::before {
            content: 'ğŸ’¡';
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 20px;
        }
        .voice-record-area {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            text-align: center;
            transition: all 0.3s ease;
        }
        .voice-record-area.recording {
            border-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
        }
        .voice-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto 16px;
        }
        .voice-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }
        .voice-btn.recording {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            animation: recordingPulse 1s ease-in-out infinite;
        }
        @keyframes recordingPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .sharing-area {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        .share-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 16px;
        }
        .share-btn {
            padding: 12px;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            background: white;
            color: #374151;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        .share-btn:hover {
            background: #f3f4f6;
            transform: translateY(-1px);
        }
        .floating-help {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
            animation: helpFloat 3s ease-in-out infinite;
            z-index: 1000;
        }
        @keyframes helpFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="gradient-bg px-6 py-6 text-white">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <button class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-opacity-30 transition-all" onclick="navigateBack()">
                    <i class="fas fa-arrow-left text-sm"></i>
                </button>
                <h1 class="text-xl font-bold">äº²å­ä»»åŠ¡</h1>
            </div>
            <div class="text-sm opacity-90">
                <i class="fas fa-heart mr-1"></i>
                <span>å®¶åº­æ—¶å…‰</span>
            </div>
        </div>
    </div>

    <!-- ä¸»è¦å†…å®¹ -->
    <div class="pb-20">
        <div class="task-container">
            <!-- ä»»åŠ¡å¤´éƒ¨ -->
            <div class="task-header">
                <div class="family-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                <h2 class="text-2xl font-bold mb-2">å®¶åº­æ•…äº‹åˆ›ä½œ</h2>
                <p class="text-pink-100">å’Œçˆ¸çˆ¸å¦ˆå¦ˆä¸€èµ·åˆ›ä½œå±äºæˆ‘ä»¬å®¶çš„æ•…äº‹</p>
            </div>

            <!-- å‚ä¸è€…åŒºåŸŸ -->
            <div class="participants-area">
                <div class="participant-card child">
                    <div class="participant-avatar">ğŸ‘§</div>
                    <div class="participant-name">å°æ˜</div>
                    <div class="participant-role">å°åˆ›ä½œå®¶</div>
                </div>
                <div class="participant-card parent">
                    <div class="participant-avatar">ğŸ‘©</div>
                    <div class="participant-name">å¦ˆå¦ˆ</div>
                    <div class="participant-role">æŒ‡å¯¼è€å¸ˆ</div>
                </div>
            </div>

            <!-- ä»»åŠ¡å†…å®¹ -->
            <div class="task-content">
                <!-- ä»»åŠ¡ä»‹ç» -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-info-circle"></i></div>
                    <span>ä»»åŠ¡ä»‹ç»</span>
                </div>

                <div class="task-description">
                    <h4 class="font-semibold text-amber-800 mb-2">ğŸ“– æˆ‘ä»¬çš„å®¶åº­æ•…äº‹</h4>
                    <p class="text-sm text-amber-700 leading-relaxed mb-3">
                        ä»Šå¤©æˆ‘ä»¬è¦ä¸€èµ·åˆ›ä½œä¸€ä¸ªå…³äºæˆ‘ä»¬å®¶åº­çš„æ¸©é¦¨æ•…äº‹ï¼è¿™ä¸ªæ•…äº‹å¯ä»¥æ˜¯çœŸå®å‘ç”Ÿçš„äº‹æƒ…ï¼Œ
                        ä¹Ÿå¯ä»¥æ˜¯æƒ³è±¡ä¸­çš„æœ‰è¶£å†’é™©ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œè¿™æ˜¯å±äºæˆ‘ä»¬å®¶çš„ç‹¬ç‰¹æ•…äº‹ã€‚
                    </p>
                    <div class="text-xs text-amber-600 font-medium">
                        â° å»ºè®®ç”¨æ—¶ï¼š30-45åˆ†é’Ÿ | ğŸ¯ éš¾åº¦ï¼šç®€å• | ğŸ‘¥ é€‚åˆå¹´é¾„ï¼š6-12å²
                    </div>
                </div>

                <!-- å°æœ‹å‹çš„ä»»åŠ¡ -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-child"></i></div>
                    <span>å°æœ‹å‹çš„ä»»åŠ¡</span>
                </div>

                <div class="role-section child-role">
                    <div class="role-header">
                        <div class="role-avatar">ğŸ‘§</div>
                        <div class="role-title">æˆ‘æ¥åˆ›ä½œæ•…äº‹</div>
                    </div>
                    
                    <ul class="task-steps">
                        <li>
                            <div class="step-number">1</div>
                            <div>
                                <div class="font-medium mb-1">æƒ³ä¸€ä¸ªæ•…äº‹ä¸»é¢˜</div>
                                <div class="text-sm text-gray-600">æ¯”å¦‚ï¼šæˆ‘ä»¬å®¶çš„å® ç‰©ã€ä¸€æ¬¡æ—…è¡Œã€æˆ–è€…æƒ³è±¡ä¸­çš„å†’é™©</div>
                            </div>
                        </li>
                        <li>
                            <div class="step-number">2</div>
                            <div>
                                <div class="font-medium mb-1">æè¿°æ•…äº‹å¼€å¤´</div>
                                <div class="text-sm text-gray-600">ç”¨è‡ªå·±çš„è¯è¯´å‡ºæ•…äº‹æ˜¯æ€ä¹ˆå¼€å§‹çš„</div>
                            </div>
                        </li>
                        <li>
                            <div class="step-number">3</div>
                            <div>
                                <div class="font-medium mb-1">æ·»åŠ æœ‰è¶£çš„ç»†èŠ‚</div>
                                <div class="text-sm text-gray-600">æƒ³æƒ³æ•…äº‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆæœ‰è¶£çš„äº‹æƒ…</div>
                            </div>
                        </li>
                        <li>
                            <div class="step-number">4</div>
                            <div>
                                <div class="font-medium mb-1">æƒ³ä¸€ä¸ªç»“å°¾</div>
                                <div class="text-sm text-gray-600">æ•…äº‹æœ€åæ˜¯æ€æ ·çš„ï¼Ÿå¤§å®¶éƒ½å¼€å¿ƒå—ï¼Ÿ</div>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- å®¶é•¿çš„ä»»åŠ¡ -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-user-friends"></i></div>
                    <span>å®¶é•¿çš„ä»»åŠ¡</span>
                </div>

                <div class="role-section parent-role">
                    <div class="role-header">
                        <div class="role-avatar">ğŸ‘©</div>
                        <div class="role-title">æˆ‘æ¥å¼•å¯¼å’Œè®°å½•</div>
                    </div>
                    
                    <ul class="task-steps">
                        <li>
                            <div class="step-number">1</div>
                            <div>
                                <div class="font-medium mb-1">å¯å‘å­©å­æ€è€ƒ</div>
                                <div class="text-sm text-gray-600">ç”¨å¼€æ”¾æ€§é—®é¢˜å¼•å¯¼å­©å­å±•å¼€æƒ³è±¡</div>
                            </div>
                        </li>
                        <li>
                            <div class="step-number">2</div>
                            <div>
                                <div class="font-medium mb-1">é¼“åŠ±è¡¨è¾¾</div>
                                <div class="text-sm text-gray-600">ç»™äºˆç§¯æçš„åé¦ˆï¼Œé¼“åŠ±å­©å­è¯¦ç»†æè¿°</div>
                            </div>
                        </li>
                        <li>
                            <div class="step-number">3</div>
                            <div>
                                <div class="font-medium mb-1">è®°å½•æ•…äº‹å†…å®¹</div>
                                <div class="text-sm text-gray-600">å¸®åŠ©å­©å­æŠŠæ•…äº‹å†™ä¸‹æ¥æˆ–å½•éŸ³</div>
                            </div>
                        </li>
                        <li>
                            <div class="step-number">4</div>
                            <div>
                                <div class="font-medium mb-1">ä¸€èµ·å®Œå–„æ•…äº‹</div>
                                <div class="text-sm text-gray-600">å’Œå­©å­ä¸€èµ·è®©æ•…äº‹æ›´åŠ å®Œæ•´ç”ŸåŠ¨</div>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- åä½œåŒºåŸŸ -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-handshake"></i></div>
                    <span>ä¸€èµ·åä½œ</span>
                </div>

                <div class="collaboration-zone">
                    <h4 class="font-semibold text-sky-800 mb-3">ğŸ¤ åˆä½œåˆ›ä½œæ—¶é—´</h4>
                    <p class="text-sm text-sky-700 leading-relaxed mb-4">
                        ç°åœ¨è®©æˆ‘ä»¬ä¸€èµ·å¼€å§‹åˆ›ä½œå§ï¼å°æœ‹å‹è´Ÿè´£æƒ³è±¡å’Œè®²è¿°ï¼Œå®¶é•¿è´Ÿè´£å¼•å¯¼å’Œè®°å½•ã€‚
                        è®°ä½ï¼Œè¿™æ˜¯æˆ‘ä»¬å…±åŒçš„åˆ›ä½œæ—¶é—´ï¼Œè¦äº’ç›¸é…åˆå“¦ï¼
                    </p>
                    
                    <!-- ä»»åŠ¡è¿›åº¦ -->
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm font-medium text-sky-700">åˆ›ä½œè¿›åº¦</span>
                            <span class="text-sm text-sky-600" id="progressText">0%</span>
                        </div>
                        <div class="progress-indicator">
                            <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                        </div>
                    </div>

                    <!-- å½•éŸ³åŒºåŸŸ -->
                    <div class="voice-record-area" id="voiceArea">
                        <button class="voice-btn" id="voiceBtn" onclick="toggleRecording()">
                            <i class="fas fa-microphone" id="voiceIcon"></i>
                        </button>
                        <div class="font-medium text-gray-700 mb-2" id="voiceStatus">ç‚¹å‡»å¼€å§‹å½•åˆ¶æ•…äº‹</div>
                        <div class="text-xs text-gray-500" id="recordingTime">å½•åˆ¶æ—¶é—´ï¼š00:00</div>
                    </div>
                </div>

                <!-- è®¡æ—¶å™¨ -->
                <div class="timer-section">
                    <div class="timer-display" id="timerDisplay">30:00</div>
                    <div class="timer-label">å»ºè®®ç”¨æ—¶</div>
                </div>

                <!-- åˆ›ä½œæç¤º -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-lightbulb"></i></div>
                    <span>åˆ›ä½œå°è´´å£«</span>
                </div>

                <div class="tips-card">
                    <h4 class="font-semibold text-green-800 mb-2">ğŸ’¡ è®©æ•…äº‹æ›´ç²¾å½©çš„å°æŠ€å·§</h4>
                    <ul class="text-sm text-green-700 space-y-2">
                        <li>â€¢ <strong>é—®å¼€æ”¾æ€§é—®é¢˜ï¼š</strong>"ç„¶åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ" "ä½ è§‰å¾—ä»–ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ"</li>
                        <li>â€¢ <strong>æ·»åŠ æ„Ÿå®˜æè¿°ï¼š</strong>"é‚£æ—¶å€™ä½ å¬åˆ°äº†ä»€ä¹ˆå£°éŸ³ï¼Ÿ" "é—»åˆ°äº†ä»€ä¹ˆå‘³é“ï¼Ÿ"</li>
                        <li>â€¢ <strong>é¼“åŠ±æƒ³è±¡ï¼š</strong>"å¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ" "è¿˜èƒ½æƒ³åˆ°åˆ«çš„åŠæ³•å—ï¼Ÿ"</li>
                        <li>â€¢ <strong>è¿æ¥ç°å®ï¼š</strong>"è¿™è®©ä½ æƒ³åˆ°äº†ä»€ä¹ˆï¼Ÿ" "æˆ‘ä»¬å®¶ä¹Ÿæœ‰ç±»ä¼¼çš„ç»å†å—ï¼Ÿ"</li>
                    </ul>
                </div>

                <!-- ç¤ºä¾‹å¯¹è¯ -->
                <div class="bg-gray-50 rounded-xl p-4 my-4">
                    <h4 class="font-semibold text-gray-700 mb-3">ğŸ“ ç¤ºä¾‹å¯¹è¯</h4>
                    <div class="space-y-3 text-sm">
                        <div class="flex gap-3">
                            <div class="text-pink-600 font-medium">å¦ˆå¦ˆï¼š</div>
                            <div class="text-gray-700">"æˆ‘ä»¬æ¥åˆ›ä½œä¸€ä¸ªå…³äºæˆ‘ä»¬å®¶å°çŒ«çš„æ•…äº‹å§ï¼ä½ è§‰å¾—å®ƒä¼šæœ‰ä»€ä¹ˆå†’é™©å‘¢ï¼Ÿ"</div>
                        </div>
                        <div class="flex gap-3">
                            <div class="text-purple-600 font-medium">å°æ˜ï¼š</div>
                            <div class="text-gray-700">"æˆ‘è§‰å¾—å°çŒ«ä¼šé£åˆ°äº‘æœµä¸Šï¼Œç„¶åé‡åˆ°å½©è™¹ï¼"</div>
                        </div>
                        <div class="flex gap-3">
                            <div class="text-pink-600 font-medium">å¦ˆå¦ˆï¼š</div>
                            <div class="text-gray-700">"å“‡ï¼Œå¤ªæœ‰è¶£äº†ï¼å®ƒæ˜¯æ€ä¹ˆé£ä¸Šå»çš„å‘¢ï¼Ÿäº‘æœµæ‘¸èµ·æ¥æ˜¯ä»€ä¹ˆæ„Ÿè§‰ï¼Ÿ"</div>
                        </div>
                    </div>
                </div>

                <!-- æ“ä½œæŒ‰é’® -->
                <div class="action-buttons">
                    <button class="action-btn primary-btn" onclick="startTask()">
                        <i class="fas fa-play text-lg"></i>
                        <span>å¼€å§‹åˆ›ä½œ</span>
                    </button>
                    
                    <button class="action-btn secondary-btn" onclick="viewInstructions()">
                        <i class="fas fa-book text-lg"></i>
                        <span>æŸ¥çœ‹è¯¦ç»†è¯´æ˜</span>
                    </button>
                </div>

                <!-- åˆ†äº«åŒºåŸŸ -->
                <div class="sharing-area">
                    <h4 class="font-semibold text-amber-800 mb-2">ğŸ‰ å®Œæˆåå¯ä»¥...</h4>
                    <p class="text-sm text-amber-700 mb-3">åˆ›ä½œå®Œæˆåï¼Œä½ ä»¬å¯ä»¥æŠŠè¿™ä¸ªç¾å¥½çš„æ•…äº‹åˆ†äº«ç»™æ›´å¤šäººï¼</p>
                    
                    <div class="share-buttons">
                        <button class="share-btn" onclick="saveStory()">
                            <i class="fas fa-save text-blue-500"></i>
                            <span>ä¿å­˜æ•…äº‹</span>
                        </button>
                        <button class="share-btn" onclick="shareFamily()">
                            <i class="fas fa-users text-green-500"></i>
                            <span>åˆ†äº«å®¶åº­</span>
                        </button>
                        <button class="share-btn" onclick="createBook()">
                            <i class="fas fa-book text-purple-500"></i>
                            <span>åˆ¶ä½œç»˜æœ¬</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æµ®åŠ¨å¸®åŠ©æŒ‰é’® -->
    <div class="floating-help" onclick="showHelp()" title="å¸®åŠ©">
        <i class="fas fa-question"></i>
    </div>

    <script>
        let isRecording = false;
        let recordingStartTime = 0;
        let recordingInterval = null;
        let taskProgress = 0;
        let taskTimer = 30 * 60; // 30åˆ†é’Ÿ

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeTask();
            startTaskTimer();
        });

        // åˆå§‹åŒ–ä»»åŠ¡
        function initializeTask() {
            updateProgress(0);
            updateTimer();
        }

        // å¼€å§‹ä»»åŠ¡è®¡æ—¶å™¨
        function startTaskTimer() {
            setInterval(() => {
                if (taskTimer > 0) {
                    taskTimer--;
                    updateTimer();
                }
            }, 1000);
        }

        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimer() {
            const minutes = Math.floor(taskTimer / 60);
            const seconds = taskTimer % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // åˆ‡æ¢å½•éŸ³çŠ¶æ€
        function toggleRecording() {
            const voiceBtn = document.getElementById('voiceBtn');
            const voiceIcon = document.getElementById('voiceIcon');
            const voiceStatus = document.getElementById('voiceStatus');
            const voiceArea = document.getElementById('voiceArea');

            if (!isRecording) {
                // å¼€å§‹å½•éŸ³
                isRecording = true;
                recordingStartTime = Date.now();
                voiceBtn.classList.add('recording');
                voiceArea.classList.add('recording');
                voiceIcon.className = 'fas fa-stop';
                voiceStatus.textContent = 'æ­£åœ¨å½•åˆ¶ä¸­...';
                
                // å¼€å§‹å½•éŸ³è®¡æ—¶
                recordingInterval = setInterval(updateRecordingTime, 1000);
                
                showNotification('å¼€å§‹å½•åˆ¶æ•…äº‹ï¼Œè¯´å‡ºä½ ä»¬çš„åˆ›æ„å§ï¼', 'info');
                
                // æ›´æ–°è¿›åº¦
                updateProgress(25);
            } else {
                // åœæ­¢å½•éŸ³
                stopRecording();
            }
        }

        // åœæ­¢å½•éŸ³
        function stopRecording() {
            isRecording = false;
            const voiceBtn = document.getElementById('voiceBtn');
            const voiceIcon = document.getElementById('voiceIcon');
            const voiceStatus = document.getElementById('voiceStatus');
            const voiceArea = document.getElementById('voiceArea');

            voiceBtn.classList.remove('recording');
            voiceArea.classList.remove('recording');
            voiceIcon.className = 'fas fa-microphone';
            voiceStatus.textContent = 'å½•åˆ¶å®Œæˆï¼ç‚¹å‡»é‡æ–°å½•åˆ¶';

            if (recordingInterval) {
                clearInterval(recordingInterval);
                recordingInterval = null;
            }

            showNotification('å½•åˆ¶å®Œæˆï¼ä½ ä»¬çš„æ•…äº‹å¾ˆç²¾å½©ï¼', 'success');
            updateProgress(75);
        }

        // æ›´æ–°å½•éŸ³æ—¶é—´
        function updateRecordingTime() {
            const elapsed = Math.floor((Date.now() - recordingStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('recordingTime').textContent = 
                `å½•åˆ¶æ—¶é—´ï¼š${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // æ›´æ–°ä»»åŠ¡è¿›åº¦
        function updateProgress(progress) {
            taskProgress = progress;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = progress + '%';
        }

        // å¼€å§‹ä»»åŠ¡
        function startTask() {
            showNotification('å¤ªå¥½äº†ï¼è®©æˆ‘ä»¬å¼€å§‹è¿™æ¬¡æ¸©é¦¨çš„å®¶åº­åˆ›ä½œæ—¶å…‰å§ï¼', 'success');
            updateProgress(10);
            
            // æ»šåŠ¨åˆ°åä½œåŒºåŸŸ
            document.querySelector('.collaboration-zone').scrollIntoView({
                behavior: 'smooth'
            });
        }

        // æŸ¥çœ‹è¯¦ç»†è¯´æ˜
        function viewInstructions() {
            const instructions = `
ğŸ“– äº²å­æ•…äº‹åˆ›ä½œè¯¦ç»†æŒ‡å—

ğŸ¯ æ´»åŠ¨ç›®æ ‡ï¼š
â€¢ å¢è¿›äº²å­æ²Ÿé€šä¸æ„Ÿæƒ…
â€¢ åŸ¹å…»å­©å­çš„æƒ³è±¡åŠ›å’Œè¡¨è¾¾èƒ½åŠ›
â€¢ åˆ›é€ ç¾å¥½çš„å®¶åº­å›å¿†
â€¢ æå‡å­©å­çš„è¯­è¨€ç»„ç»‡èƒ½åŠ›

ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ è§’è‰²åˆ†å·¥ï¼š
ã€å°æœ‹å‹ã€‘
â€¢ å‘æŒ¥æƒ³è±¡åŠ›ï¼Œæ„æ€æ•…äº‹æƒ…èŠ‚
â€¢ ç”¨è‡ªå·±çš„è¯­è¨€æè¿°æ•…äº‹
â€¢ è¡¨è¾¾å†…å¿ƒçš„æƒ³æ³•å’Œæ„Ÿå—

ã€å®¶é•¿ã€‘
â€¢ ç”¨å¼€æ”¾æ€§é—®é¢˜å¼•å¯¼å­©å­æ€è€ƒ
â€¢ ç»™äºˆç§¯æçš„é¼“åŠ±å’Œåé¦ˆ
â€¢ å¸®åŠ©è®°å½•å’Œæ•´ç†æ•…äº‹å†…å®¹
â€¢ ä¸å­©å­ä¸€èµ·å®Œå–„æ•…äº‹ç»†èŠ‚

ğŸ”§ æ“ä½œæ­¥éª¤ï¼š
1. é€‰æ‹©ä¸€ä¸ªèˆ’é€‚çš„ç¯å¢ƒï¼Œç¡®ä¿ä¸è¢«æ‰“æ‰°
2. å’Œå­©å­ä¸€èµ·é€‰æ‹©æ•…äº‹ä¸»é¢˜
3. å¼•å¯¼å­©å­å¼€å§‹è®²è¿°æ•…äº‹
4. é€‚æ—¶æé—®ï¼Œå¸®åŠ©å­©å­å±•å¼€æƒ³è±¡
5. è®°å½•æ•…äº‹å†…å®¹ï¼ˆæ–‡å­—æˆ–å½•éŸ³ï¼‰
6. å’Œå­©å­ä¸€èµ·å›é¡¾å’Œå®Œå–„æ•…äº‹

ğŸ’¡ å¼•å¯¼æŠ€å·§ï¼š
â€¢ "ç„¶åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"
â€¢ "ä½ è§‰å¾—ä»–å½“æ—¶çš„å¿ƒæƒ…æ€ä¹ˆæ ·ï¼Ÿ"
â€¢ "å¦‚æœæ˜¯ä½ ä¼šæ€ä¹ˆåšï¼Ÿ"
â€¢ "è¿™ä¸ªåœ°æ–¹æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ"
â€¢ "è¿˜æœ‰ä»€ä¹ˆæœ‰è¶£çš„äº‹æƒ…å—ï¼Ÿ"

â­ å®Œæˆæ ‡å‡†ï¼š
â€¢ æ•…äº‹æœ‰æ¸…æ™°çš„å¼€å¤´ã€è¿‡ç¨‹å’Œç»“å°¾
â€¢ å­©å­èƒ½å¤Ÿç‹¬ç«‹è¡¨è¾¾æƒ³æ³•
â€¢ å®¶é•¿å’Œå­©å­éƒ½ç§¯æå‚ä¸
â€¢ åˆ›ä½œè¿‡ç¨‹æ„‰å¿«å’Œè°

ğŸ‰ åç»­æ´»åŠ¨ï¼š
â€¢ å¯ä»¥æŠŠæ•…äº‹ç”»æˆå›¾ç”»
â€¢ åˆ¶ä½œæˆå®¶åº­æ•…äº‹ä¹¦
â€¢ åˆ†äº«ç»™å…¶ä»–å®¶åº­æˆå‘˜
â€¢ ç»§ç»­åˆ›ä½œç³»åˆ—æ•…äº‹
            `;
            
            showNotification(instructions, 'info');
        }

        // ä¿å­˜æ•…äº‹
        function saveStory() {
            showNotification('æ•…äº‹å·²ä¿å­˜åˆ°å®¶åº­æ•…äº‹é›†ä¸­ï¼', 'success');
            updateProgress(90);
        }

        // åˆ†äº«ç»™å®¶åº­
        function shareFamily() {
            showNotification('æ•…äº‹å·²åˆ†äº«ç»™å®¶åº­ç¾¤ç»„ï¼', 'success');
        }

        // åˆ¶ä½œç»˜æœ¬
        function createBook() {
            showNotification('æ­£åœ¨ä¸ºä½ ä»¬åˆ¶ä½œä¸“å±æ•…äº‹ç»˜æœ¬...', 'info');
            setTimeout(() => {
                updateProgress(100);
                showNotification('æ­å–œï¼ä½ ä»¬çš„å®¶åº­æ•…äº‹ç»˜æœ¬åˆ¶ä½œå®Œæˆï¼', 'success');
            }, 3000);
        }

        // æ˜¾ç¤ºå¸®åŠ©
        function showHelp() {
            const helpText = `
ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ äº²å­ä»»åŠ¡å¸®åŠ©

ğŸ¯ è¿™ä¸ªä»»åŠ¡çš„ç›®çš„ï¼š
â€¢ å¢è¿›äº²å­æ„Ÿæƒ…ï¼Œåˆ›é€ ç¾å¥½å›å¿†
â€¢ åŸ¹å…»å­©å­çš„æƒ³è±¡åŠ›å’Œè¡¨è¾¾èƒ½åŠ›
â€¢ è®©å®¶åº­æˆå‘˜æ›´å¥½åœ°äº†è§£å½¼æ­¤
â€¢ åœ¨è½»æ¾æ„‰å¿«çš„æ°›å›´ä¸­å­¦ä¹ 

â° æ—¶é—´å®‰æ’å»ºè®®ï¼š
â€¢ æ€»ç”¨æ—¶ï¼š30-45åˆ†é’Ÿ
â€¢ å‡†å¤‡é˜¶æ®µï¼š5åˆ†é’Ÿ
â€¢ åˆ›ä½œé˜¶æ®µï¼š25-35åˆ†é’Ÿ
â€¢ åˆ†äº«é˜¶æ®µï¼š5åˆ†é’Ÿ

ğŸ—£ï¸ å½•éŸ³åŠŸèƒ½è¯´æ˜ï¼š
â€¢ ç‚¹å‡»éº¦å…‹é£æŒ‰é’®å¼€å§‹å½•åˆ¶
â€¢ å†æ¬¡ç‚¹å‡»åœæ­¢å½•åˆ¶
â€¢ å¯ä»¥é‡å¤å½•åˆ¶ç›´åˆ°æ»¡æ„
â€¢ å½•éŸ³ä¼šè‡ªåŠ¨ä¿å­˜

ğŸ’¡ åˆ›ä½œä¸é¡ºåˆ©æ€ä¹ˆåŠï¼š
â€¢ ä»ç®€å•çš„æ—¥å¸¸ç”Ÿæ´»å¼€å§‹
â€¢ å¯ä»¥å…ˆèŠèŠä»Šå¤©å‘ç”Ÿçš„äº‹
â€¢ é—®ä¸€äº›å¼•å¯¼æ€§é—®é¢˜
â€¢ ä¿æŒè½»æ¾æ„‰å¿«çš„æ°›å›´
â€¢ è®°ä½è¿‡ç¨‹æ¯”ç»“æœæ›´é‡è¦

â“ éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ
å¯ä»¥ç‚¹å‡»é¡µé¢ä¸Šçš„æç¤ºå¡ç‰‡ï¼Œæˆ–è€…æŸ¥çœ‹ç¤ºä¾‹å¯¹è¯ã€‚
            `;
            
            showNotification(helpText, 'info');
        }

        // è¿”å›ä¸Šä¸€é¡µ
        function navigateBack() {
            parent.postMessage({
                type: 'navigate',
                page: 'parent-panel'
            }, '*');
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            parent.postMessage({
                type: 'showNotification',
                message: message,
                notificationType: type
            }, '*');
        }
    </script>
</body>
</html>
