<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIÂàÜÊûêÊä•Âëä - ËêåËäΩAI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="mengya-common.js"></script>
    <script src="learning-analytics.js"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .report-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.1);
            overflow: hidden;
            margin: 16px;
        }
        .report-header {
            background: linear-gradient(135deg, #3B82F6 0%, #1D4ED8 100%);
            color: white;
            padding: 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .report-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: aiGlow 4s ease-in-out infinite;
        }
        @keyframes aiGlow {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }
        .ai-icon {
            font-size: 48px;
            margin-bottom: 12px;
            animation: aiPulse 3s ease-in-out infinite;
        }
        @keyframes aiPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            padding: 20px;
            background: #f8fafc;
        }
        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--color);
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .stat-number {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        .stat-label {
            font-size: 14px;
            color: #6b7280;
            font-weight: 500;
        }
        .analysis-section {
            padding: 24px;
        }
        .section-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 16px;
        }
        .section-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        .insight-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            position: relative;
        }
        .insight-card::before {
            content: 'ü§ñ';
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 24px;
        }
        .ability-analysis {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            transition: all 0.3s ease;
        }
        .ability-analysis:hover {
            border-color: #3B82F6;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.1);
        }
        .ability-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        .ability-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            margin-right: 16px;
        }
        .ability-info {
            flex: 1;
        }
        .ability-name {
            font-size: 18px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 4px;
        }
        .ability-description {
            font-size: 14px;
            color: #6b7280;
        }
        .progress-container {
            margin: 16px 0;
        }
        .progress-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .progress-level {
            font-size: 12px;
            font-weight: 500;
            padding: 2px 8px;
            border-radius: 12px;
            color: white;
        }
        .progress-bar {
            background: #f3f4f6;
            border-radius: 10px;
            height: 8px;
            position: relative;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 10px;
            position: relative;
            transition: width 2s ease;
        }
        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        .trend-card {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            position: relative;
        }
        .trend-card::before {
            content: 'üìà';
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 24px;
        }
        .suggestions-card {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 2px solid #22c55e;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            position: relative;
        }
        .suggestions-card::before {
            content: 'üí°';
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 24px;
        }
        .suggestion-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 16px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
        }
        .suggestion-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }
        .chart-container {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .chart-bar {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }
        .chart-label {
            width: 80px;
            font-size: 14px;
            color: #374151;
            font-weight: 500;
        }
        .chart-progress {
            flex: 1;
            height: 24px;
            background: #f3f4f6;
            border-radius: 12px;
            overflow: hidden;
            margin: 0 12px;
            position: relative;
        }
        .chart-fill {
            height: 100%;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            transition: width 2s ease;
        }
        .achievement-timeline {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin: 16px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .timeline-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        .timeline-item:last-child {
            border-bottom: none;
        }
        .timeline-date {
            width: 60px;
            font-size: 12px;
            color: #6b7280;
            text-align: center;
        }
        .timeline-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            flex-shrink: 0;
        }
        .timeline-content {
            flex: 1;
        }
        .timeline-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 4px;
        }
        .timeline-description {
            font-size: 12px;
            color: #6b7280;
        }
        .action-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 24px 0;
        }
        .action-btn {
            padding: 16px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }
        .primary-btn {
            background: linear-gradient(45deg, #3B82F6, #1D4ED8);
            color: white;
        }
        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }
        .secondary-btn {
            background: white;
            border: 2px solid #e5e7eb;
            color: #374151;
        }
        .secondary-btn:hover {
            background: #f9fafb;
            border-color: #3B82F6;
            transform: translateY(-1px);
        }
        .floating-export {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
            animation: exportFloat 3s ease-in-out infinite;
            z-index: 1000;
        }
        @keyframes exportFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- È°∂ÈÉ®ÂØºËà™ -->
    <div class="gradient-bg px-6 py-6 text-white">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <button class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-opacity-30 transition-all" onclick="navigateBack()">
                    <i class="fas fa-arrow-left text-sm"></i>
                </button>
                <h1 class="text-xl font-bold">AIÂàÜÊûêÊä•Âëä</h1>
            </div>
            <div class="text-sm opacity-90">
                <i class="fas fa-calendar mr-1"></i>
                <span id="reportDate">Êú¨Âë®</span>
            </div>
        </div>
    </div>

    <!-- ‰∏ªË¶ÅÂÜÖÂÆπ -->
    <div class="pb-32">
        <div class="report-container">
            <!-- Êä•ÂëäÂ§¥ÈÉ® -->
            <div class="report-header">
                <div class="ai-icon">üß†</div>
                <h2 class="text-2xl font-bold mb-2">Êô∫ËÉΩÊàêÈïøÂàÜÊûê</h2>
                <p class="text-blue-100">Âü∫‰∫éAIÊ∑±Â∫¶Â≠¶‰π†ÁöÑ‰∏™ÊÄßÂåñËÉΩÂäõËØÑ‰º∞Êä•Âëä</p>
            </div>

            <!-- Ê†∏ÂøÉÊï∞ÊçÆÁªüËÆ° -->
            <div class="stats-grid">
                <div class="stat-card" style="--color: linear-gradient(90deg, #3B82F6, #1D4ED8);">
                    <div class="stat-number text-blue-600">92</div>
                    <div class="stat-label">ÁªºÂêàËÉΩÂäõÂàÜ</div>
                </div>
                <div class="stat-card" style="--color: linear-gradient(90deg, #10B981, #059669);">
                    <div class="stat-number text-green-600">15</div>
                    <div class="stat-label">Êú¨Âë®ÂÆåÊàê‰ªªÂä°</div>
                </div>
                <div class="stat-card" style="--color: linear-gradient(90deg, #F59E0B, #D97706);">
                    <div class="stat-number text-amber-600">12h</div>
                    <div class="stat-label">Á¥ØËÆ°Â≠¶‰π†Êó∂Èïø</div>
                </div>
                <div class="stat-card" style="--color: linear-gradient(90deg, #EC4899, #BE185D);">
                    <div class="stat-number text-pink-600">+8</div>
                    <div class="stat-label">ËÉΩÂäõÊèêÂçáÁÇπ</div>
                </div>
            </div>

            <!-- ÂàÜÊûêÂÜÖÂÆπ -->
            <div class="analysis-section">
                <!-- AIÊ∑±Â∫¶Ê¥ûÂØü -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-brain"></i></div>
                    <span>AIÊ∑±Â∫¶Ê¥ûÂØü</span>
                </div>

                <!-- Âä®ÊÄÅAIÊ¥ûÂØüÂç°Áâá -->
                <div id="insightContainer">
                    <!-- Ê¥ûÂØüÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                    <div class="insight-card">
                        <h4 class="font-semibold text-sky-800 mb-3">üß† AIÊ≠£Âú®Ê∑±Â∫¶ÂàÜÊûê‰∏≠...</h4>
                        <div class="flex items-center justify-center py-8">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"></div>
                            <span class="ml-3 text-sky-600">Ê≠£Âú®ËøêË°åÊ∑±Â∫¶Â≠¶‰π†ÂàÜÊûêÂºïÊìé...</span>
                        </div>
                    </div>
                </div>

                <!-- Â≠¶‰π†Ë°å‰∏∫Ê®°ÂºèÂàÜÊûê -->
                <div class="section-title mt-8">
                    <div class="section-icon"><i class="fas fa-brain"></i></div>
                    <span>Â≠¶‰π†Ë°å‰∏∫Ê∑±Â∫¶ÂàÜÊûê</span>
                </div>

                <div class="behavior-analysis-grid grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- Â≠¶‰π†Êó∂Èó¥ÂÅèÂ•Ω -->
                    <div class="behavior-card bg-white rounded-xl p-4 shadow-md" id="timePreferences">
                        <div class="behavior-header flex items-center mb-3">
                            <div class="behavior-icon w-10 h-10 rounded-lg flex items-center justify-center mr-3" style="background: linear-gradient(135deg, #F59E0B, #D97706);">
                                <i class="fas fa-clock text-white"></i>
                            </div>
                            <div class="behavior-info">
                                <div class="behavior-title font-semibold text-gray-800">Â≠¶‰π†Êó∂Èó¥ÂÅèÂ•Ω</div>
                                <div class="behavior-status text-sm text-gray-500" id="timePreferenceStatus">AIÂàÜÊûê‰∏≠...</div>
                            </div>
                        </div>
                        <div class="behavior-details" id="timePreferenceDetails">
                            <div class="animate-pulse bg-gray-200 h-4 rounded mb-2"></div>
                            <div class="animate-pulse bg-gray-200 h-3 rounded"></div>
                        </div>
                    </div>

                    <!-- Ê≥®ÊÑèÂäõÊ®°Âºè -->
                    <div class="behavior-card bg-white rounded-xl p-4 shadow-md" id="attentionPatterns">
                        <div class="behavior-header flex items-center mb-3">
                            <div class="behavior-icon w-10 h-10 rounded-lg flex items-center justify-center mr-3" style="background: linear-gradient(135deg, #10B981, #059669);">
                                <i class="fas fa-eye text-white"></i>
                            </div>
                            <div class="behavior-info">
                                <div class="behavior-title font-semibold text-gray-800">‰∏ìÊ≥®ÂäõÊ®°Âºè</div>
                                <div class="behavior-status text-sm text-gray-500" id="attentionStatus">AIÂàÜÊûê‰∏≠...</div>
                            </div>
                        </div>
                        <div class="behavior-details" id="attentionDetails">
                            <div class="animate-pulse bg-gray-200 h-4 rounded mb-2"></div>
                            <div class="animate-pulse bg-gray-200 h-3 rounded"></div>
                        </div>
                    </div>

                    <!-- Â≠¶‰π†Á≠ñÁï•ÂÅèÂ•Ω -->
                    <div class="behavior-card bg-white rounded-xl p-4 shadow-md" id="learningStrategies">
                        <div class="behavior-header flex items-center mb-3">
                            <div class="behavior-icon w-10 h-10 rounded-lg flex items-center justify-center mr-3" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">
                                <i class="fas fa-lightbulb text-white"></i>
                            </div>
                            <div class="behavior-info">
                                <div class="behavior-title font-semibold text-gray-800">Â≠¶‰π†Á≠ñÁï•ÂÅèÂ•Ω</div>
                                <div class="behavior-status text-sm text-gray-500" id="strategyStatus">AIÂàÜÊûê‰∏≠...</div>
                            </div>
                        </div>
                        <div class="behavior-details" id="strategyDetails">
                            <div class="animate-pulse bg-gray-200 h-4 rounded mb-2"></div>
                            <div class="animate-pulse bg-gray-200 h-3 rounded"></div>
                        </div>
                    </div>

                    <!-- ÊÉÖÊÑüÁä∂ÊÄÅÂàÜÊûê -->
                    <div class="behavior-card bg-white rounded-xl p-4 shadow-md" id="emotionalState">
                        <div class="behavior-header flex items-center mb-3">
                            <div class="behavior-icon w-10 h-10 rounded-lg flex items-center justify-center mr-3" style="background: linear-gradient(135deg, #EC4899, #BE185D);">
                                <i class="fas fa-heart text-white"></i>
                            </div>
                            <div class="behavior-info">
                                <div class="behavior-title font-semibold text-gray-800">ÊÉÖÊÑüÁä∂ÊÄÅÂàÜÊûê</div>
                                <div class="behavior-status text-sm text-gray-500" id="emotionalStatus">AIÂàÜÊûê‰∏≠...</div>
                            </div>
                        </div>
                        <div class="behavior-details" id="emotionalDetails">
                            <div class="animate-pulse bg-gray-200 h-4 rounded mb-2"></div>
                            <div class="animate-pulse bg-gray-200 h-3 rounded"></div>
                        </div>
                    </div>
                </div>

                <!-- ËÉΩÂäõÁª¥Â∫¶ÂàÜÊûê -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-chart-radar"></i></div>
                    <span>ËÉΩÂäõÁª¥Â∫¶ÂàÜÊûê</span>
                </div>

                <div class="ability-analysis">
                    <div class="ability-header">
                        <div class="flex items-center">
                            <div class="ability-icon" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">üé®</div>
                            <div class="ability-info">
                                <div class="ability-name">ÂàõÊÑèË°®ËææËÉΩÂäõ</div>
                                <div class="ability-description">ÊÉ≥Ë±°ÂäõÂíåËØ≠Ë®ÄË°®ËææÁöÑÁªºÂêà‰ΩìÁé∞</div>
                            </div>
                        </div>
                        <div class="progress-level" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">‰ºòÁßÄ</div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-label">
                            <span class="text-sm font-medium">ÂΩìÂâçÊ∞¥Âπ≥</span>
                            <span class="text-sm text-purple-600 font-bold">88/100</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 88%; background: linear-gradient(90deg, #8B5CF6, #7C3AED);"></div>
                        </div>
                    </div>
                    
                    <div class="text-sm text-gray-600 mt-3">
                        <strong>AIËØÑ‰ª∑Ôºö</strong>Âú®ÊïÖ‰∫ãÂàõ‰Ωú‰∏≠Â±ïÁé∞Âá∫‰∏∞ÂØåÁöÑÊÉ≥Ë±°ÂäõÔºåËÉΩÂ§üÊûÑÂª∫ÂÆåÊï¥ÁöÑÊïÖ‰∫ãÊÉÖËäÇÔºåËØçÊ±áËøêÁî®ÊÅ∞ÂΩìÔºåË°®ËææÁîüÂä®ÊúâË∂£„ÄÇ
                    </div>
                </div>

                <div class="ability-analysis">
                    <div class="ability-header">
                        <div class="flex items-center">
                            <div class="ability-icon" style="background: linear-gradient(135deg, #10B981, #059669);">üßÆ</div>
                            <div class="ability-info">
                                <div class="ability-name">ÈÄªËæëÊÄùÁª¥ËÉΩÂäõ</div>
                                <div class="ability-description">ÂàÜÊûêÊé®ÁêÜÂíåÈóÆÈ¢òËß£ÂÜ≥ËÉΩÂäõ</div>
                            </div>
                        </div>
                        <div class="progress-level" style="background: linear-gradient(135deg, #10B981, #059669);">ËâØÂ•Ω</div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-label">
                            <span class="text-sm font-medium">ÂΩìÂâçÊ∞¥Âπ≥</span>
                            <span class="text-sm text-green-600 font-bold">72/100</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 72%; background: linear-gradient(90deg, #10B981, #059669);"></div>
                        </div>
                    </div>
                    
                    <div class="text-sm text-gray-600 mt-3">
                        <strong>AIËØÑ‰ª∑Ôºö</strong>ËÉΩÂ§üÁêÜËß£Âü∫Êú¨ÁöÑÈÄªËæëÂÖ≥Á≥ªÔºåÂú®Ëß£ÂÜ≥ÈóÆÈ¢òÊó∂ÊúâËá™Â∑±ÁöÑÊÄùË∑ØÔºå‰ΩÜÂú®Â§çÊùÇÊé®ÁêÜÊñπÈù¢ËøòÊúâÊèêÂçáÁ©∫Èó¥„ÄÇ
                    </div>
                </div>

                <div class="ability-analysis">
                    <div class="ability-header">
                        <div class="flex items-center">
                            <div class="ability-icon" style="background: linear-gradient(135deg, #F59E0B, #D97706);">üí¨</div>
                            <div class="ability-info">
                                <div class="ability-name">Ê≤üÈÄö‰∫§ÊµÅËÉΩÂäõ</div>
                                <div class="ability-description">‰∏é‰ªñ‰∫∫‰∫íÂä®ÂíåË°®ËææÁöÑËÉΩÂäõ</div>
                            </div>
                        </div>
                        <div class="progress-level" style="background: linear-gradient(135deg, #F59E0B, #D97706);">‰ºòÁßÄ</div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-label">
                            <span class="text-sm font-medium">ÂΩìÂâçÊ∞¥Âπ≥</span>
                            <span class="text-sm text-amber-600 font-bold">85/100</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 85%; background: linear-gradient(90deg, #F59E0B, #D97706);"></div>
                        </div>
                    </div>
                    
                    <div class="text-sm text-gray-600 mt-3">
                        <strong>AIËØÑ‰ª∑Ôºö</strong>ÂñÑ‰∫é‰∏éAIÂä©Êâã‰∫§ÊµÅÔºåËÉΩÂ§üÊ∏ÖÊô∞Ë°®ËææËá™Â∑±ÁöÑÊÉ≥Ê≥ïÔºå‰∫íÂä®ÁßØÊûÅ‰∏ªÂä®ÔºåÁêÜËß£ËÉΩÂäõÂº∫„ÄÇ
                    </div>
                </div>

                <div class="ability-analysis">
                    <div class="ability-header">
                        <div class="flex items-center">
                            <div class="ability-icon" style="background: linear-gradient(135deg, #EC4899, #BE185D);">üéØ</div>
                            <div class="ability-info">
                                <div class="ability-name">‰∏ìÊ≥®ÊåÅÁª≠Âäõ</div>
                                <div class="ability-description">ÈõÜ‰∏≠Ê≥®ÊÑèÂäõÂÆåÊàê‰ªªÂä°ÁöÑËÉΩÂäõ</div>
                            </div>
                        </div>
                        <div class="progress-level" style="background: linear-gradient(135deg, #EC4899, #BE185D);">ÂæÖÊèêÂçá</div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-label">
                            <span class="text-sm font-medium">ÂΩìÂâçÊ∞¥Âπ≥</span>
                            <span class="text-sm text-pink-600 font-bold">65/100</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 65%; background: linear-gradient(90deg, #EC4899, #BE185D);"></div>
                        </div>
                    </div>
                    
                    <div class="text-sm text-gray-600 mt-3">
                        <strong>AIËØÑ‰ª∑Ôºö</strong>Âú®ÊÑüÂÖ¥Ë∂£ÁöÑ‰ªªÂä°‰∏äËÉΩÂ§ü‰øùÊåÅ‰∏ìÊ≥®Ôºå‰ΩÜÈÅáÂà∞ËæÉÈöæÊàñÊûØÁá•ÁöÑÂÜÖÂÆπÊó∂ÂÆπÊòìÂàÜÂøÉÔºåÈúÄË¶ÅÂä†Âº∫‰∏ìÊ≥®ÂäõËÆ≠ÁªÉ„ÄÇ
                    </div>
                </div>

                <!-- Â≠¶‰π†Ë∂ãÂäøÂàÜÊûê -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-chart-line"></i></div>
                    <span>Â≠¶‰π†Ë∂ãÂäøÂàÜÊûê</span>
                </div>

                <div class="trend-card">
                    <h4 class="font-semibold text-amber-800 mb-3">üìä Êú¨Âë®Ë°®Áé∞Ë∂ãÂäø</h4>
                    <div class="chart-container">
                        <div class="chart-bar">
                            <div class="chart-label">Âë®‰∏Ä</div>
                            <div class="chart-progress">
                                <div class="chart-fill" style="width: 75%; background: linear-gradient(90deg, #3B82F6, #1D4ED8);">75</div>
                            </div>
                        </div>
                        <div class="chart-bar">
                            <div class="chart-label">Âë®‰∫å</div>
                            <div class="chart-progress">
                                <div class="chart-fill" style="width: 82%; background: linear-gradient(90deg, #10B981, #059669);">82</div>
                            </div>
                        </div>
                        <div class="chart-bar">
                            <div class="chart-label">Âë®‰∏â</div>
                            <div class="chart-progress">
                                <div class="chart-fill" style="width: 90%; background: linear-gradient(90deg, #8B5CF6, #7C3AED);">90</div>
                            </div>
                        </div>
                        <div class="chart-bar">
                            <div class="chart-label">Âë®Âõõ</div>
                            <div class="chart-progress">
                                <div class="chart-fill" style="width: 88%; background: linear-gradient(90deg, #F59E0B, #D97706);">88</div>
                            </div>
                        </div>
                        <div class="chart-bar">
                            <div class="chart-label">Âë®‰∫î</div>
                            <div class="chart-progress">
                                <div class="chart-fill" style="width: 95%; background: linear-gradient(90deg, #EC4899, #BE185D);">95</div>
                            </div>
                        </div>
                    </div>
                    <p class="text-sm text-amber-700 mt-3">
                        Êï¥‰ΩìÂëàÁé∞<strong>Á®≥Ê≠•‰∏äÂçá</strong>ÁöÑË∂ãÂäøÔºåÂë®‰∫îË°®Áé∞ÊúÄ‰Ω≥„ÄÇÂª∫ËÆÆ‰øùÊåÅÁõÆÂâçÁöÑÂ≠¶‰π†ËäÇÂ•èÔºåÁªßÁª≠Â∑©Âõ∫‰ºòÂäø„ÄÇ
                    </p>
                </div>

                <!-- ‰∏™ÊÄßÂåñÂª∫ËÆÆ -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-lightbulb"></i></div>
                    <span>‰∏™ÊÄßÂåñÊàêÈïøÂª∫ËÆÆ</span>
                </div>

                <div class="suggestions-card">
                    <h4 class="font-semibold text-green-800 mb-4">üåü AI‰∏ìÂ±ûÂª∫ËÆÆ</h4>
                    
                    <div class="suggestion-item">
                        <div class="suggestion-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div>
                            <div class="font-medium text-green-800 mb-1">Ê∑±ÂåñÂàõÊÑèË°®ËææËÆ≠ÁªÉ</div>
                            <div class="text-sm text-green-700">Âü∫‰∫éÂ∞èÊòéÂú®ÂàõÊÑèÊñπÈù¢ÁöÑÂ§©ËµãÔºåÂª∫ËÆÆÂ¢ûÂä†ÊïÖ‰∫ãÁª≠ÂÜô„ÄÅËØóÊ≠åÂàõ‰ΩúÁ≠âÈ´òÈò∂‰ªªÂä°ÔºåËøõ‰∏ÄÊ≠•ÂèëÊå•ÊÉ≥Ë±°Âäõ‰ºòÂäø„ÄÇ</div>
                        </div>
                    </div>

                    <div class="suggestion-item">
                        <div class="suggestion-icon">
                            <i class="fas fa-puzzle-piece"></i>
                        </div>
                        <div>
                            <div class="font-medium text-green-800 mb-1">ÈÄªËæëÊÄùÁª¥Ê∏∏ÊàèÂåñËÆ≠ÁªÉ</div>
                            <div class="text-sm text-green-700">ÈÄöËøáË∂£Âë≥Êï∞Â≠¶Ê∏∏Êàè„ÄÅÊé®ÁêÜË∞úÈ¢òÁ≠âÊñπÂºèÔºåÂú®‰øùÊåÅÂÖ¥Ë∂£ÁöÑÂêåÊó∂ÊèêÂçáÈÄªËæëÊÄùÁª¥ËÉΩÂäõ„ÄÇ</div>
                        </div>
                    </div>

                    <div class="suggestion-item">
                        <div class="suggestion-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <div class="font-medium text-green-800 mb-1">‰∏ìÊ≥®ÂäõÂàÜÈò∂ÊÆµËÆ≠ÁªÉ</div>
                            <div class="text-sm text-green-700">‰ªé15ÂàÜÈíüÂºÄÂßãÔºåÈÄêÊ≠•Âª∂Èïø‰∏ìÊ≥®Êó∂Èó¥„ÄÇÂèØ‰ΩøÁî®Áï™ËåÑÂ∑•‰ΩúÊ≥ïÔºå‰∏≠Èó¥Á©øÊèíÂ∞èÊ∏∏Êàè‰Ωú‰∏∫Â•ñÂä±„ÄÇ</div>
                        </div>
                    </div>

                    <div class="suggestion-item">
                        <div class="suggestion-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div>
                            <div class="font-medium text-green-800 mb-1">‰∫≤Â≠ê‰∫íÂä®Â¢ûÂº∫</div>
                            <div class="text-sm text-green-700">Âª∫ËÆÆÊØèÂë®ÂÆâÊéí2-3Ê¨°‰∫≤Â≠ê‰ªªÂä°ÔºåÂú®ËΩªÊùæÁöÑÊ∞õÂõ¥‰∏≠ÊèêÂçáÂ≠©Â≠êÁöÑÊ≤üÈÄöË°®ËææËÉΩÂäõ„ÄÇ</div>
                        </div>
                    </div>
                </div>

                <!-- ÊàêÈïøÈáåÁ®ãÁ¢ë -->
                <div class="section-title">
                    <div class="section-icon"><i class="fas fa-trophy"></i></div>
                    <span>ÊàêÈïøÈáåÁ®ãÁ¢ë</span>
                </div>

                <div class="achievement-timeline">
                    <div class="timeline-item">
                        <div class="timeline-date">‰ªäÂ§©</div>
                        <div class="timeline-icon" style="background: linear-gradient(135deg, #8B5CF6, #7C3AED);">üé®</div>
                        <div class="timeline-content">
                            <div class="timeline-title">ÂàõÊÑèË°®ËææÁ™ÅÁ†¥</div>
                            <div class="timeline-description">ÂÆåÊàê„ÄäÁ•ûÂ•á‰∏ñÁïå„ÄãÂàõ‰ΩúÔºåÊÉ≥Ë±°ÂäõËØÑÂàÜËææÂà∞‰ºòÁßÄÁ∫ßÂà´</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-date">Êò®Â§©</div>
                        <div class="timeline-icon" style="background: linear-gradient(135deg, #10B981, #059669);">üèÜ</div>
                        <div class="timeline-content">
                            <div class="timeline-title">ËøûÁª≠Â≠¶‰π†ÊàêÂ∞±</div>
                            <div class="timeline-description">ËøûÁª≠7Â§©ÂÆåÊàêÂ≠¶‰π†ÊâìÂç°ÔºåËé∑Âæó"ÂùöÊåÅ‰πãÊòü"ÂããÁ´†</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-date">3Â§©Ââç</div>
                        <div class="timeline-icon" style="background: linear-gradient(135deg, #F59E0B, #D97706);">üí¨</div>
                        <div class="timeline-content">
                            <div class="timeline-title">Ê≤üÈÄöËÉΩÂäõÊèêÂçá</div>
                            <div class="timeline-description">‰∏éAIÂä©ÊâãÂØπËØùÊ¨°Êï∞Á™ÅÁ†¥100Ê¨°Ôºå‰∫§ÊµÅË¥®ÈáèÊòæËëóÊèêÈ´ò</div>
                        </div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="timeline-date">1Âë®Ââç</div>
                        <div class="timeline-icon" style="background: linear-gradient(135deg, #EC4899, #BE185D);">üìö</div>
                        <div class="timeline-content">
                            <div class="timeline-title">ÈòÖËØªÁêÜËß£ËøõÊ≠•</div>
                            <div class="timeline-description">ÈòÖËØªÁêÜËß£Ê≠£Á°ÆÁéá‰ªé70%ÊèêÂçáÂà∞85%</div>
                        </div>
                    </div>
                </div>

                <!-- Êìç‰ΩúÊåâÈíÆ -->
                <div class="action-buttons">
                    <button class="action-btn primary-btn" onclick="generateDetailedReport()">
                        <i class="fas fa-file-alt text-lg"></i>
                        <span>ÁîüÊàêËØ¶ÁªÜÊä•Âëä</span>
                    </button>
                    
                    <button class="action-btn secondary-btn" onclick="shareReport()">
                        <i class="fas fa-share text-lg"></i>
                        <span>ÂàÜ‰∫´Êä•Âëä</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÊµÆÂä®ÂØºÂá∫ÊåâÈíÆ -->
    <div class="floating-export" onclick="exportReport()" title="ÂØºÂá∫Êä•Âëä">
        <i class="fas fa-download"></i>
    </div>

    <script>
        // È°µÈù¢ÂàùÂßãÂåñ - ÈõÜÊàêÊ∑±Â∫¶ÂàÜÊûê
        MengyaUtils.Lifecycle.onInit(async () => {
            await initializeEnhancedReport();
            animateCharts();
            
            // Âª∂Ëøü2ÁßíÂêéÂºÄÂßãÊ∑±Â∫¶ÂàÜÊûêÔºåÂ±ïÁ§∫Âä†ËΩΩÊïàÊûú
            setTimeout(() => {
                runDeepAnalysis();
            }, 2000);
        });

        // Â¢ûÂº∫ÁöÑÊä•ÂëäÂàùÂßãÂåñ
        async function initializeEnhancedReport() {
            updateReportDate();
            await loadAnalyticsData();
            setupRealTimeUpdates();
        }

        // ËøêË°åÊ∑±Â∫¶ÂàÜÊûê
        async function runDeepAnalysis() {
            try {
                // Ëé∑ÂèñÊúÄÊñ∞ÁöÑÂ≠¶‰π†‰ºöËØùÊï∞ÊçÆ
                const latestSession = await getLatestSessionData();
                
                if (!latestSession) {
                    showFallbackAnalysis();
                    return;
                }

                // ËøêË°åÊ∑±Â∫¶Â≠¶‰π†ÂàÜÊûê
                const analysis = await MengyaUtils.Analytics.analyzeComprehensively(latestSession);
                
                // Êõ¥Êñ∞UIÊòæÁ§∫
                updateInsightContainer(analysis);
                updateBehaviorAnalysis(analysis);
                updatePredictiveAnalysis(analysis);
                
                MengyaUtils.Notification.success('Ê∑±Â∫¶Â≠¶‰π†ÂàÜÊûêÂÆåÊàêÔºÅ');
                
            } catch (error) {
                console.error('Ê∑±Â∫¶ÂàÜÊûêÂ§±Ë¥•:', error);
                showAnalysisError();
            }
        }

        // Ëé∑ÂèñÊúÄÊñ∞Â≠¶‰π†‰ºöËØùÊï∞ÊçÆ
        async function getLatestSessionData() {
            const taskCompletion = await MengyaUtils.Data.getData('child.lastTaskCompletion');
            
            if (!taskCompletion) {
                // ÁîüÊàêÊ®°ÊãüÊï∞ÊçÆÁî®‰∫éÊºîÁ§∫
                return {
                    sessionId: 'demo_' + Date.now(),
                    taskId: 'creative-world',
                    answer: 'Âú®ÊàëÊÉ≥Ë±°‰∏≠ÁöÑÁ•ûÂ•á‰∏ñÁïåÈáåÔºåÂ§©Á©∫ÊòØÂΩ©ËôπËâ≤ÁöÑÔºå‰∫ëÊúµÂÉèÊ£âËä±Á≥ñ‰∏ÄÊ†∑ÁîúÁæé„ÄÇÈÇ£ÈáåÊúâ‰ºöËØ¥ËØùÁöÑÂ∞èÂä®Áâ©ÔºåÂÆÉ‰ª¨ÈÉΩÂæàÂèãÂ•Ω„ÄÇÊ£ÆÊûóÈáåÁöÑÊ†ëÊú®‰ºöÂî±Ê≠åÔºåËä±Êúµ‰ºöË∑≥Ëàû„ÄÇÊàëÂú®ÈÇ£ÈáåÈÅáÂà∞‰∫Ü‰∏ÄÂè™ËÅ™ÊòéÁöÑÂ∞èÁãêÁã∏ÔºåÂÆÉÊïô‰ºö‰∫ÜÊàëÂ¶Ç‰ΩïÁî®ÂøÉÁÅµÊÑüÂèóÂ§ßËá™ÁÑ∂ÁöÑÁæéÂ¶ô„ÄÇÊàë‰ª¨‰∏ÄËµ∑Êé¢Èô©ÔºåÂèëÁé∞‰∫ÜÂæàÂ§öÊúâË∂£ÁöÑÁßòÂØÜ„ÄÇ',
                    wordCount: 108,
                    timeUsed: 18 * 60, // 18ÂàÜÈíü
                    timestamp: Date.now(),
                    score: 88
                };
            }
            
            return {
                sessionId: taskCompletion.taskId + '_' + taskCompletion.timestamp,
                taskId: taskCompletion.taskId,
                answer: taskCompletion.answer,
                wordCount: taskCompletion.wordCount,
                timeUsed: taskCompletion.timeUsed,
                timestamp: taskCompletion.timestamp,
                score: taskCompletion.score
            };
        }

        // Êõ¥Êñ∞AIÊ¥ûÂØüÂÆπÂô®
        function updateInsightContainer(analysis) {
            const container = document.getElementById('insightContainer');
            const insights = generateInsightCards(analysis);
            
            container.innerHTML = insights;
            
            // Ê∑ªÂä†Âá∫Áé∞Âä®Áîª
            setTimeout(() => {
                container.querySelectorAll('.insight-card').forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    
                    setTimeout(() => {
                        card.style.transition = 'all 0.6s ease';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, index * 200);
                });
            }, 100);
        }

        // ÁîüÊàêÊ¥ûÂØüÂç°ÁâáHTML
        function generateInsightCards(analysis) {
            const abilities = analysis.abilityAnalysis;
            const recommendations = analysis.personalizedRecommendations;
            
            // ÊâæÂá∫ÊúÄÂº∫ÂíåÊúÄÂº±ÁöÑËÉΩÂäõ
            const abilityScores = Object.entries(abilities).map(([name, data]) => ({
                name,
                score: data.score,
                level: data.level
            }));
            
            const strongest = abilityScores.reduce((a, b) => a.score > b.score ? a : b);
            const weakest = abilityScores.reduce((a, b) => a.score < b.score ? a : b);
            
            return `
                <div class="insight-card">
                    <h4 class="font-semibold text-sky-800 mb-3">üéØ AIÊ∑±Â∫¶Ê¥ûÂØü</h4>
                    <p class="text-sm text-sky-700 leading-relaxed mb-4">
                        ÈÄöËøáAIÊ∑±Â∫¶ÂàÜÊûêÔºåÂèëÁé∞Â≠©Â≠êÂú®<strong>${getAbilityDisplayName(strongest.name)}</strong>ÊñπÈù¢Ë°®Áé∞Á™ÅÂá∫Ôºà${strongest.score}ÂàÜÔºâÔºå
                        Â±ïÁé∞Âá∫${strongest.level}ÁöÑÊ∞¥Âπ≥„ÄÇÂêåÊó∂Ôºå<strong>${getAbilityDisplayName(weakest.name)}</strong>ËøòÊúâËæÉÂ§ßÊèêÂçáÁ©∫Èó¥„ÄÇ
                    </p>
                    <div class="grid grid-cols-2 gap-3 text-xs">
                        <div class="bg-white bg-opacity-70 rounded-lg p-2">
                            <div class="font-medium text-sky-800">‰ºòÂäøËÉΩÂäõ</div>
                            <div class="text-sky-600">${getAbilityDisplayName(strongest.name)}</div>
                        </div>
                        <div class="bg-white bg-opacity-70 rounded-lg p-2">
                            <div class="font-medium text-sky-800">ÊàêÈïøÁ©∫Èó¥</div>
                            <div class="text-sky-600">${getAbilityDisplayName(weakest.name)}</div>
                        </div>
                    </div>
                </div>
                
                <div class="insight-card">
                    <h4 class="font-semibold text-green-800 mb-3">üìà Â≠¶‰π†Ê®°ÂºèÂàÜÊûê</h4>
                    <p class="text-sm text-green-700 leading-relaxed mb-4">
                        AIÊ£ÄÊµãÂà∞Â≠©Â≠êÁöÑÂ≠¶‰π†Ê®°Âºè‰∏∫<strong>ÂàõÊÑèÈ©±Âä®Âûã</strong>ÔºåÂú®ÂØåÊúâÊÉ≥Ë±°ÂäõÁöÑ‰ªªÂä°‰∏≠Ë°®Áé∞Êõ¥‰Ω≥„ÄÇ
                        Âª∫ËÆÆÈááÁî®ÊïÖ‰∫ãÂåñ„ÄÅÊ∏∏ÊàèÂåñÁöÑÂ≠¶‰π†ÊñπÂºèÊù•Áª¥ÊåÅÂ≠¶‰π†ÂÖ¥Ë∂£„ÄÇ
                    </p>
                    <div class="flex items-center space-x-4 text-xs">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded">ÊÉ≥Ë±°Âäõ‰∏∞ÂØå</span>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded">Ë°®ËææÁîüÂä®</span>
                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded">‰∫íÂä®ÁßØÊûÅ</span>
                    </div>
                </div>
                
                <div class="insight-card">
                    <h4 class="font-semibold text-amber-800 mb-3">üöÄ ‰∏™ÊÄßÂåñÂª∫ËÆÆ</h4>
                    <div class="space-y-2 text-sm">
                        ${generateRecommendationItems(recommendations)}
                    </div>
                </div>
            `;
        }

        // ÁîüÊàêÂª∫ËÆÆÈ°πÁõÆ
        function generateRecommendationItems(recommendations) {
            const allRecs = [
                ...recommendations.immediate,
                ...recommendations.shortTerm
            ].slice(0, 3);
            
            if (allRecs.length === 0) {
                return '<div class="text-amber-700">ÁªßÁª≠‰øùÊåÅÂΩìÂâçÁöÑÂ≠¶‰π†ËäÇÂ•èÔºåË°®Áé∞ÂæàÊ£íÔºÅ</div>';
            }
            
            return allRecs.map(rec => `
                <div class="flex items-start space-x-2">
                    <div class="w-2 h-2 bg-amber-500 rounded-full mt-1.5 flex-shrink-0"></div>
                    <span class="text-amber-700">${rec.description || rec.title}</span>
                </div>
            `).join('');
        }

        // Êõ¥Êñ∞Ë°å‰∏∫ÂàÜÊûêÊòæÁ§∫
        function updateBehaviorAnalysis(analysis) {
            const patterns = analysis.behaviorPatterns;
            const emotional = analysis.emotionalState;
            
            // Êõ¥Êñ∞Êó∂Èó¥ÂÅèÂ•Ω
            updateTimePreferences(patterns.timePreferences);
            
            // Êõ¥Êñ∞Ê≥®ÊÑèÂäõÊ®°Âºè
            updateAttentionPatterns(analysis);
            
            // Êõ¥Êñ∞Â≠¶‰π†Á≠ñÁï•
            updateLearningStrategies(analysis);
            
            // Êõ¥Êñ∞ÊÉÖÊÑüÁä∂ÊÄÅ
            updateEmotionalState(emotional);
        }

        function updateTimePreferences(timeData) {
            const statusEl = document.getElementById('timePreferenceStatus');
            const detailsEl = document.getElementById('timePreferenceDetails');
            
            if (timeData.pattern === 'insufficient_data') {
                statusEl.textContent = 'Êï∞ÊçÆÁßØÁ¥Ø‰∏≠';
                detailsEl.innerHTML = `
                    <div class="text-sm text-gray-600">
                        ÈúÄË¶ÅÊõ¥Â§öÂ≠¶‰π†Êï∞ÊçÆÊù•ÂàÜÊûêÊó∂Èó¥ÂÅèÂ•ΩÊ®°Âºè
                    </div>
                `;
            } else {
                const timeNames = {
                    morning: '‰∏äÂçàÊó∂ÊÆµ',
                    afternoon: '‰∏ãÂçàÊó∂ÊÆµ',
                    evening: 'Êôö‰∏äÊó∂ÊÆµ'
                };
                
                statusEl.textContent = `ÂÅèÂ•Ω${timeNames[timeData.pattern]}Â≠¶‰π†`;
                detailsEl.innerHTML = `
                    <div class="text-sm text-gray-700 mb-2">
                        Âú®${timeNames[timeData.pattern]}Â≠¶‰π†ÊïàÊûúÊúÄ‰Ω≥
                    </div>
                    <div class="text-xs text-gray-500">
                        ${timeData.recommendation || 'Âª∫ËÆÆÂú®Ê≠§Êó∂ÊÆµÂÆâÊéíÈáçË¶ÅÂ≠¶‰π†‰ªªÂä°'}
                    </div>
                `;
            }
        }

        function updateAttentionPatterns(analysis) {
            const statusEl = document.getElementById('attentionStatus');
            const detailsEl = document.getElementById('attentionDetails');
            
            const focusScore = analysis.abilityAnalysis.focus.score;
            let pattern = '';
            let recommendation = '';
            
            if (focusScore >= 80) {
                pattern = '‰∏ìÊ≥®Âäõ‰ºòÁßÄ';
                recommendation = 'ËÉΩÂ§üÊåÅÁª≠‰∏ìÊ≥®ÔºåÈÄÇÂêàÈïøÊó∂Èó¥Â≠¶‰π†‰ªªÂä°';
            } else if (focusScore >= 60) {
                pattern = '‰∏ìÊ≥®ÂäõËâØÂ•Ω';
                recommendation = 'Âª∫ËÆÆÈÄÇÂΩì‰ºëÊÅØÔºåÈááÁî®Áï™ËåÑÂ∑•‰ΩúÊ≥ï';
            } else {
                pattern = '‰∏ìÊ≥®ÂäõÂæÖÊèêÂçá';
                recommendation = 'Âª∫ËÆÆÂàÜËß£‰ªªÂä°ÔºåÂ¢ûÂä†‰∫íÂä®ÂÖÉÁ¥†';
            }
            
            statusEl.textContent = pattern;
            detailsEl.innerHTML = `
                <div class="text-sm text-gray-700 mb-2">
                    ‰∏ìÊ≥®ÂäõËØÑÂàÜ: ${focusScore}/100
                </div>
                <div class="text-xs text-gray-500">
                    ${recommendation}
                </div>
            `;
        }

        function updateLearningStrategies(analysis) {
            const statusEl = document.getElementById('strategyStatus');
            const detailsEl = document.getElementById('strategyDetails');
            
            // Âü∫‰∫éËÉΩÂäõÂàÜÊûêÊé®Êñ≠Â≠¶‰π†Á≠ñÁï•ÂÅèÂ•Ω
            const creativity = analysis.abilityAnalysis.creativity.score;
            const logic = analysis.abilityAnalysis.logic.score;
            
            let strategy = '';
            let description = '';
            
            if (creativity > logic) {
                strategy = 'ÂàõÊÑèÂØºÂêëÂûã';
                description = 'ÂÅèÂ•ΩÈÄöËøáÊÉ≥Ë±°ÂíåÂàõÈÄ†Êù•Â≠¶‰π†';
            } else if (logic > creativity) {
                strategy = 'ÈÄªËæëÂØºÂêëÂûã';
                description = 'ÂÅèÂ•ΩÈÄöËøáÊé®ÁêÜÂíåÂàÜÊûêÊù•Â≠¶‰π†';
            } else {
                strategy = 'Âπ≥Ë°°ÂèëÂ±ïÂûã';
                description = 'ÂàõÊÑèÂíåÈÄªËæëËÉΩÂäõÂùáË°°ÂèëÂ±ï';
            }
            
            statusEl.textContent = strategy;
            detailsEl.innerHTML = `
                <div class="text-sm text-gray-700 mb-2">
                    ${description}
                </div>
                <div class="text-xs text-gray-500">
                    Âª∫ËÆÆÈááÁî®Â§öÊ†∑ÂåñÁöÑÂ≠¶‰π†ÊñπÂºè
                </div>
            `;
        }

        function updateEmotionalState(emotional) {
            const statusEl = document.getElementById('emotionalStatus');
            const detailsEl = document.getElementById('emotionalDetails');
            
            // Ê®°ÊãüÊÉÖÊÑüÂàÜÊûêÁªìÊûú
            const emotionalStates = [
                { state: 'ÁßØÊûÅ‰πêËßÇ', color: 'text-green-600', description: 'Â≠¶‰π†ÊÄÅÂ∫¶ÁßØÊûÅÔºåÊÉÖÁª™Á®≥ÂÆö' },
                { state: '‰∏ìÊ≥®ÊäïÂÖ•', color: 'text-blue-600', description: 'ÂØπÂ≠¶‰π†ÂÜÖÂÆπË°®Áé∞Âá∫ÊµìÂéöÂÖ¥Ë∂£' },
                { state: 'ËΩªÊùæÊÑâÂø´', color: 'text-purple-600', description: 'Â≠¶‰π†ËøáÁ®ã‰∏≠‰øùÊåÅÊÑâÊÇ¶ÂøÉÊÉÖ' }
            ];
            
            const currentState = emotionalStates[Math.floor(Math.random() * emotionalStates.length)];
            
            statusEl.textContent = currentState.state;
            statusEl.className = `text-sm ${currentState.color}`;
            
            detailsEl.innerHTML = `
                <div class="text-sm text-gray-700 mb-2">
                    ${currentState.description}
                </div>
                <div class="text-xs text-gray-500">
                    ÊÉÖÊÑüÁä∂ÊÄÅÂØπÂ≠¶‰π†ÊïàÊûúÊúâÁßØÊûÅÂΩ±Âìç
                </div>
            `;
        }

        // Ëé∑ÂèñËÉΩÂäõÊòæÁ§∫ÂêçÁß∞
        function getAbilityDisplayName(abilityName) {
            const names = {
                expression: 'ËØ≠Ë®ÄË°®Ëææ',
                logic: 'ÈÄªËæëÊÄùÁª¥',
                creativity: 'ÂàõÊÑèÊÄùÁª¥',
                focus: '‰∏ìÊ≥®ÊåÅÁª≠'
            };
            return names[abilityName] || abilityName;
        }

        // ÊòæÁ§∫ÂàÜÊûêÈîôËØØ
        function showAnalysisError() {
            const container = document.getElementById('insightContainer');
            container.innerHTML = `
                <div class="insight-card">
                    <h4 class="font-semibold text-red-800 mb-3">‚ö†Ô∏è ÂàÜÊûêÊöÇÊó∂‰∏çÂèØÁî®</h4>
                    <p class="text-sm text-red-700">
                        AIÂàÜÊûêÂºïÊìéÊöÇÊó∂ÈÅáÂà∞ÈóÆÈ¢òÔºåËØ∑Á®çÂêéÈáçËØï„ÄÇÊÇ®‰ªçÂèØ‰ª•Êü•ÁúãÂü∫Á°ÄÂ≠¶‰π†Êï∞ÊçÆ„ÄÇ
                    </p>
                </div>
            `;
        }

        // ÊòæÁ§∫ÂêéÂ§áÂàÜÊûê
        function showFallbackAnalysis() {
            const container = document.getElementById('insightContainer');
            container.innerHTML = `
                <div class="insight-card">
                    <h4 class="font-semibold text-blue-800 mb-3">üìä Âü∫Á°ÄÂàÜÊûêÊä•Âëä</h4>
                    <p class="text-sm text-blue-700 mb-4">
                        Â≠©Â≠êÊúÄËøëÁöÑÂ≠¶‰π†Ë°®Áé∞ËâØÂ•ΩÔºåÂª∫ËÆÆÁªßÁª≠‰øùÊåÅÂΩìÂâçÁöÑÂ≠¶‰π†ËäÇÂ•è„ÄÇ
                        ÂÆåÊàêÊõ¥Â§öÂ≠¶‰π†‰ªªÂä°ÂêéÔºåAIÂ∞ÜËÉΩÊèê‰æõÊõ¥ËØ¶ÁªÜÁöÑ‰∏™ÊÄßÂåñÂàÜÊûê„ÄÇ
                    </p>
                    <div class="text-xs text-blue-600">
                        üí° ÊèêÁ§∫ÔºöÊõ¥Â§öÂ≠¶‰π†Êï∞ÊçÆÂ∞ÜËß£ÈîÅÊ∑±Â∫¶AIÂàÜÊûêÂäüËÉΩ
                    </div>
                </div>
            `;
        }

        // Âä†ËΩΩÂàÜÊûêÊï∞ÊçÆ
        async function loadAnalyticsData() {
            try {
                const analyticsData = await MengyaUtils.Data.getData('analytics.latestAnalysis');
                if (analyticsData) {
                    // Â∑≤Âä†ËΩΩÂéÜÂè≤ÂàÜÊûêÊï∞ÊçÆ
                }
            } catch (error) {
                // È¶ñÊ¨°‰ΩøÁî®ÔºåÊöÇÊó†ÂéÜÂè≤ÂàÜÊûêÊï∞ÊçÆ
            }
        }

        // ËÆæÁΩÆÂÆûÊó∂Êõ¥Êñ∞
        function setupRealTimeUpdates() {
            // ÊØè5ÂàÜÈíüÊ£ÄÊü•‰∏ÄÊ¨°ÊòØÂê¶ÊúâÊñ∞ÁöÑÂ≠¶‰π†Êï∞ÊçÆ
            setInterval(async () => {
                const lastUpdate = await MengyaUtils.Data.getData('child.progress.lastUpdated');
                const lastCheck = localStorage.getItem('lastAnalysisCheck');
                
                if (lastUpdate && (!lastCheck || lastUpdate > parseInt(lastCheck))) {
                    // Ê£ÄÊµãÂà∞Êñ∞ÁöÑÂ≠¶‰π†Êï∞ÊçÆÔºåÂáÜÂ§áÊõ¥Êñ∞ÂàÜÊûê
                    localStorage.setItem('lastAnalysisCheck', Date.now().toString());
                    // ÂèØ‰ª•ÈÄâÊã©Ëá™Âä®ÈáçÊñ∞ÂàÜÊûêÊàñÊèêÁ§∫Áî®Êà∑
                }
            }, 5 * 60 * 1000);
        }

        // Êõ¥Êñ∞È¢ÑÊµãÂàÜÊûêÔºàÂèØÈÄâÔºâ
        function updatePredictiveAnalysis(analysis) {
            const predictions = analysis.predictions;
            if (predictions) {
                // È¢ÑÊµãÂàÜÊûêÁªìÊûú
                // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†È¢ÑÊµãÂàÜÊûêÁöÑUIÊõ¥Êñ∞
            }
        }

        // Êõ¥Êñ∞Êä•ÂëäÊó•Êúü
        function updateReportDate() {
            const now = new Date();
            const options = { month: 'long', day: 'numeric' };
            const dateStr = now.toLocaleDateString('zh-CN', options);
            const reportDateEl = document.getElementById('reportDate');
            if (reportDateEl) {
                reportDateEl.textContent = `Êà™Ëá≥${dateStr}`;
            }
        }

        // Êï∞Â≠óÂä®Áîª
        function animateCounters(userData) {
            const counters = document.querySelectorAll('.stat-number');
            counters.forEach(counter => {
                const target = parseInt(counter.textContent) || 0;
                let current = 0;
                const increment = target / 30;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    counter.textContent = Math.floor(current);
                }, 50);
            });
        }

        // ÂõæË°®Âä®Áîª
        function animateCharts() {
            const progressFills = document.querySelectorAll('.progress-fill');
            const chartFills = document.querySelectorAll('.chart-fill');
            
            // Âª∂ËøüÊâßË°åÂä®Áîª
            setTimeout(() => {
                progressFills.forEach(fill => {
                    const width = fill.style.width;
                    fill.style.width = '0%';
                    setTimeout(() => {
                        fill.style.width = width;
                    }, 100);
                });
                
                chartFills.forEach((fill, index) => {
                    const width = fill.style.width;
                    fill.style.width = '0%';
                    setTimeout(() => {
                        fill.style.width = width;
                    }, 200 + index * 100);
                });
            }, 500);
        }

        // ÁîüÊàêËØ¶ÁªÜÊä•Âëä
        function generateDetailedReport() {
            MengyaUtils.Notification.info('Ê≠£Âú®ÁîüÊàêËØ¶ÁªÜÊä•Âëä...');
            
            setTimeout(() => {
                const report = `
üìä Â∞èÊòéÁöÑËØ¶ÁªÜÊàêÈïøÊä•Âëä

üìà ÁªºÂêàËÉΩÂäõËØÑ‰º∞Ôºö92ÂàÜ (‰ºòÁßÄ)
‚Ä¢ ÂàõÊÑèË°®ËææÔºö88ÂàÜ - ÊÉ≥Ë±°Âäõ‰∏∞ÂØåÔºåË°®ËææÁîüÂä®
‚Ä¢ ÈÄªËæëÊÄùÁª¥Ôºö72ÂàÜ - Âü∫Á°ÄÊâéÂÆûÔºåÈúÄÂä†Âº∫ËÆ≠ÁªÉ  
‚Ä¢ Ê≤üÈÄö‰∫§ÊµÅÔºö85ÂàÜ - ‰∫íÂä®ÁßØÊûÅÔºåÁêÜËß£ÂäõÂº∫
‚Ä¢ ‰∏ìÊ≥®ÊåÅÁª≠Ôºö65ÂàÜ - ÂÖ¥Ë∂£ÂØºÂêëÔºåÈúÄË¶ÅÂºïÂØº

üéØ Â≠¶‰π†ÁâπÁÇπÂàÜÊûêÔºö
‚Ä¢ ÂØπÂàõÊÑèÁ±ª‰ªªÂä°ÂÖ¥Ë∂£ÊµìÂéöÔºåÂÆåÊàêË¥®ÈáèÈ´ò
‚Ä¢ ÂñÑ‰∫éÁî®ÊïÖ‰∫ãÂíåÊØîÂñªÁêÜËß£ÊäΩË±°Ê¶ÇÂøµ
‚Ä¢ ÂñúÊ¨¢‰∫íÂä®ÂºèÂ≠¶‰π†Ôºå‰∏çÂ§™ÈÄÇÂ∫îÂçïË∞ÉÁªÉ‰π†
‚Ä¢ Âú®ÈºìÂä±ÂíåËÆ§ÂèØ‰∏ãË°®Áé∞Êõ¥‰Ω≥

üí° ÂÆ∂ÈïøÊåáÂØºÂª∫ËÆÆÔºö
‚Ä¢ Â§öÁªô‰∫àÂàõÊÑèË°®ËææÁöÑÊú∫‰ºöÂíåÂπ≥Âè∞
‚Ä¢ Áî®Ê∏∏ÊàèÂåñÊñπÂºèËøõË°åÈÄªËæëÊÄùÁª¥ËÆ≠ÁªÉ
‚Ä¢ Âª∫Á´ãÂ≠¶‰π†Â•ñÂä±Êú∫Âà∂ÔºåÊèêÂçá‰∏ìÊ≥®Âäõ
‚Ä¢ ÂÆöÊúüËøõË°å‰∫≤Â≠ê‰∫íÂä®Â≠¶‰π†Ê¥ªÂä®

üìÖ ‰∏ãÂë®Â≠¶‰π†ËÆ°ÂàíÔºö
‚Ä¢ Âë®‰∏ÄÔºöÂàõÊÑèÂÜô‰ΩúËøõÈò∂ËÆ≠ÁªÉ
‚Ä¢ Âë®‰∫åÔºöÊï∞Â≠¶ÈÄªËæëÊ∏∏Êàè
‚Ä¢ Âë®‰∏âÔºö‰∫≤Â≠êÊïÖ‰∫ãÂàõ‰Ωú
‚Ä¢ Âë®ÂõõÔºö‰∏ìÊ≥®ÂäõÊèêÂçáÁªÉ‰π†
‚Ä¢ Âë®‰∫îÔºöÁªºÂêàËÉΩÂäõÊµãËØÑ

Êú¨Êä•ÂëäÂü∫‰∫éAIÁÆóÊ≥ïÂàÜÊûêÁîüÊàêÔºåÂª∫ËÆÆÁªìÂêàÂÆûÈôÖÊÉÖÂÜµË∞ÉÊï¥„ÄÇ
                `;
                
                MengyaUtils.Notification.success('ËØ¶ÁªÜÊä•ÂëäÂ∑≤ÁîüÊàêÔºÅ');
                // ÁîüÊàêÊä•ÂëäÂÆåÊàêÔºåÂÆûÈôÖÂ∫îÁî®‰∏≠ÂèØ‰ª•ÂºπÁ™óÊòæÁ§∫Êàñ‰∏ãËΩΩ
            }, 2000);
        }

        // ÂàÜ‰∫´Êä•Âëä
        function shareReport() {
            if (navigator.share) {
                navigator.share({
                    title: 'Â∞èÊòéÁöÑAIÊàêÈïøÂàÜÊûêÊä•Âëä',
                    text: 'Êü•ÁúãÂ≠©Â≠êÁöÑÊúÄÊñ∞Â≠¶‰π†ÂàÜÊûêÂíåÊàêÈïøÂª∫ËÆÆ',
                    url: window.location.href
                });
            } else {
                // Â§áÁî®ÂàÜ‰∫´ÊñπÊ°à
                const shareText = 'Êü•ÁúãÂ∞èÊòéÁöÑAIÊàêÈïøÂàÜÊûêÊä•ÂëäÔºöÁªºÂêàËÉΩÂäõ92ÂàÜÔºåÂàõÊÑèË°®ËææË°®Áé∞Á™ÅÂá∫ÔºÅ';
                navigator.clipboard.writeText(shareText).then(() => {
                    MengyaUtils.Notification.success('ÂàÜ‰∫´ÂÜÖÂÆπÂ∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥Êùø');
                });
            }
        }

        // ÂØºÂá∫Êä•Âëä
        function exportReport() {
            MengyaUtils.Notification.info('Ê≠£Âú®ÂáÜÂ§áÊä•ÂëäÂØºÂá∫...');
            
            setTimeout(() => {
                // Ê®°ÊãüÂØºÂá∫ÂäüËÉΩ
                const reportData = {
                    date: new Date().toISOString(),
                    studentName: 'Â∞èÊòé',
                    overallScore: 92,
                    abilities: {
                        creativity: 88,
                        logic: 72,
                        communication: 85,
                        focus: 65
                    },
                    weeklyTrend: [75, 82, 90, 88, 95],
                    suggestions: [
                        'Ê∑±ÂåñÂàõÊÑèË°®ËææËÆ≠ÁªÉ',
                        'ÈÄªËæëÊÄùÁª¥Ê∏∏ÊàèÂåñËÆ≠ÁªÉ',
                        '‰∏ìÊ≥®ÂäõÂàÜÈò∂ÊÆµËÆ≠ÁªÉ',
                        '‰∫≤Â≠ê‰∫íÂä®Â¢ûÂº∫'
                    ]
                };
                
                // ÂÆûÈôÖÂ∫îÁî®‰∏≠ËøôÈáå‰ºöÁîüÊàêPDFÊàñExcelÊñá‰ª∂
                // Êä•ÂëäÊï∞ÊçÆÂáÜÂ§áÂÆåÊàê
                MengyaUtils.Notification.success('Êä•ÂëäÂ∑≤ÂØºÂá∫Âà∞‰∏ãËΩΩÊñá‰ª∂Â§π');
            }, 1500);
        }

        // ËøîÂõû‰∏ä‰∏ÄÈ°µ
        function navigateBack() {
            MengyaUtils.Navigation.smartBack();
        }
    </script>
</body>
</html>
